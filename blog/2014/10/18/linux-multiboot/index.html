
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Multiboot: Booting Linux From ISO Placed in HDD via GRUB - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="I am a big fan of Linux and want to frequently try out various distributions such as Mint, Ubuntu, Kali and ArchLinux. Though my main system is Linux &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alfred-sun.github.io/xxx/blog/2014/10/18/linux-multiboot/">
  <link href="/xxx/favicon.png" rel="icon">
  <link href="/xxx/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/xxx/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/xxx/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/xxx/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/xxx/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/xxx/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="alfred-sun.github.io/xxx">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/xxx/">Blog</a></li>
  <li><a href="/xxx/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Multiboot: Booting Linux From ISO Placed in HDD via GRUB</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T00:00:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I am a big fan of Linux and want to frequently try out various distributions such as <a href="http://www.linuxmint.com/">Mint</a>, <a href="http://www.ubuntu.com/">Ubuntu</a>, <a href="http://www.kali.org/">Kali</a> and <a href="https://www.archlinux.org/">ArchLinux</a>.</p>

<p>Though my main system is Linux 16, I use ISO placed in my HDD to boot and try these various distributions whenever I like.
What are the advatages:
* No messing up with partitions on HDD
* No installation required
* Most major flavours support live booting</p>

<p>Disadvantages:
* Changes are not persisted
* Can take some time to initially setup</p>

<p>I will describe how it can be done with very minimnal conifuration and hassle.</p>

<!--more-->


<p>We are going to setup the multiboot configuration of following OS. They will be booted entirely from ISO placed in HDD
* Gparted Live CD (ISO)
* Kali Linux (ISO)
* Linux Mint 17 (ISO)</p>

<p>I assume you are running any Linux distribution with <a href="http://www.gnu.org/software/grub/">GRUB</a> as the bootloader.</p>

<p>First download the ISO&rsquo;s for the distributions you want to boot. For this article, I downloaded the above 3 from:
* <a href="http://gparted.org/download.php">http://gparted.org/download.php</a>
* <a href="http://www.kali.org/downloads/">http://www.kali.org/downloads/</a>
* <a href="http://www.linuxmint.com/download.php">http://www.linuxmint.com/download.php</a></p>

<p>Place it in any directory in your root partition. In my case I dropped them in  <code>~/isos/</code> as <code>kali.iso</code>, <code>mint17.iso</code> and <code>gparted-live.iso</code></p>

<p>Now, edit your grub configuration to add the custom entries. The file we are looking to edit is <code>/etc/grub.d/40_custom</code></p>

<p>Here is my configuration:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>menuentry &quot;Gparted live&quot; {
</span><span class='line'>  insmod ntfs
</span><span class='line'>  insmod iso9660
</span><span class='line'>
</span><span class='line'>      set isofile=&quot;/home/madhur/isos/gparted-live.iso&quot;
</span><span class='line'>      loopback loop (hd0,msdos2)$isofile
</span><span class='line'>      linux (loop)/live/vmlinuz boot=live config union=aufs noswap noprompt vga=788 ip=frommedia toram=filesystem.squashfs findiso=$isofile nomodeset
</span><span class='line'>      initrd (loop)/live/initrd.img
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>menuentry &quot;Mint 17&quot; {
</span><span class='line'>  insmod ntfs
</span><span class='line'>  insmod iso9660
</span><span class='line'>
</span><span class='line'>      set isofile=&quot;/home/madhur/isos/mint17.iso&quot;
</span><span class='line'>      loopback loop (hd0,msdos2)$isofile
</span><span class='line'>      linux (loop)/casper/vmlinuz file=/cdrom/preseed/linuxmint.seed iso-scan/filename=$isofile boot=casper debug --verbose nomodeset
</span><span class='line'>      initrd (loop)/casper/initrd.lz
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>menuentry &quot;Kali&quot; {
</span><span class='line'>  insmod ntfs
</span><span class='line'>  insmod iso9660
</span><span class='line'>
</span><span class='line'>      set isofile=&quot;/home/madhur/isos/kali.iso&quot;
</span><span class='line'>      loopback loop (hd0,msdos2)$isofile
</span><span class='line'>      linux (loop)/live/vmlinuz boot=live noconfig=sudo username=root hostname=kali findiso=$isofile debug --verbose nomodeset
</span><span class='line'>      initrd (loop)/live/initrd.img
</span><span class='line'>    }
</span></code></pre></td></tr></table></div></figure>


<p>Some of the parameters deserve explanation:</p>

<ul>
<li><code>insmod ntfs</code> and <code>insmod iso9660</code> load the ntfs and iso kernel modules if they are not loaded</li>
<li><code>debug --verbose</code> will disable the splash screen and show the textual boot screen while loading. This can be helpful to see if something goes wrong.</li>
<li><code>nomodeset</code> will defer loading the Video drivers and will force fallback to BIOS for display. You might not need it. However, it was required in my case as my
 graphics card (Nvidia GeForce 750 Ti) was not detected.</li>
<li><code>(hd0, msdos2)</code> this needs to be changed to reflect the disk# and partition# of partition where ISO&rsquo;s are located. Here <code>hd0</code> means the first hard disk and <code>msdos2</code> means second partition. Note that in grub disk numbering  starts from zero while partition numbering starts from 1. Weird.</li>
</ul>


<p>Once done with all the changes, fire <code>sudo update-grub</code> to update your <code>grub.cfg</code> with these changes.</p>

<h3>Troubleshooting</h3>

<ul>
<li>Note that you might not just get this right in first go. Things can go wrong and be prepared for it.</li>
<li>Take special care of <code>(hd0, msdos2)</code> to determine your correct configuration. It is not easy as /dev/sda1=(hd0, 1) and /dev/sdb1 = (hd1, 1). In my case /dev/sdc referred to hd0. Had hard time figuring out.</li>
<li>While booting from grub, you can press <code>e</code> to edit the command line on the fly and try out various options wuch as commenting out <code>nomodeset</code> and different combinations for <code>(hd#, msdos#)</code>. Once you have figured out the correct option, update the <code>40_custom</code> and execute <code>update-grub</code> again.</li>
<li>You can also press <code>c</code> on the grub screen to fall into grub terminal and execute command such as <code>ls (hd0, msdos2) /</code> to see if that works.</li>
<li>Different distros have their specific command line options. Peek into the ISO file to look at <code>grub.cfg</code> or <code>entries.cfg</code> to determine the corrent command line boot options.</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      




<time class='entry-date' datetime='2014-10-18T00:00:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://alfred-sun.github.io/xxx/blog/2014/10/18/linux-multiboot/" data-via="" data-counturl="http://alfred-sun.github.io/xxx/blog/2014/10/18/linux-multiboot/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/xxx/blog/2014/09/10/docs-deploying-github/" title="Previous Post: Deploying to Github Pages">&laquo; Deploying to Github Pages</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/xxx/blog/2014/10/18/linux-multiboot/">Multiboot: Booting Linux From ISO Placed in HDD via GRUB</a>
      </li>
    
      <li class="post">
        <a href="/xxx/blog/2014/09/10/docs-deploying-github/">Deploying to Github Pages</a>
      </li>
    
      <li class="post">
        <a href="/xxx/blog/2011/12/29/cmdshellfirst/">Windows Command shell(cmd.exe) Runs Only First Command</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
